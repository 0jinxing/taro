<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.68">
<link rel="search" type="application/opensearchdescription+xml" title="Taro 文档" href="/taro/opensearch.xml">
<script src="https://storage.jd.com/taro-resource/tongji.js" async></script>
<script src="https://storage.jd.com/taro-docs/taro-doc-hotjar.js" async></script><title data-react-helmet="true">Taro 规范 | Taro 文档</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="2.x"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-2.x"><meta data-react-helmet="true" property="og:title" content="Taro 规范 | Taro 文档"><meta data-react-helmet="true" name="description" content="项目组织"><meta data-react-helmet="true" property="og:description" content="项目组织"><meta data-react-helmet="true" property="og:url" content="https://nervjs.github.io/taro/docs/2.x/spec-for-taro"><link data-react-helmet="true" rel="shortcut icon" href="/taro/./img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://nervjs.github.io/taro/docs/2.x/spec-for-taro"><link rel="stylesheet" href="/taro/styles.aced0b20.css">
<link rel="preload" href="/taro/styles.55db6f27.js" as="script">
<link rel="preload" href="/taro/runtime~main.452067a7.js" as="script">
<link rel="preload" href="/taro/main.741ca0ab.js" as="script">
<link rel="preload" href="/taro/1.8febc1d6.js" as="script">
<link rel="preload" href="/taro/2.caae0f6a.js" as="script">
<link rel="preload" href="/taro/1be78505.0177abb3.js" as="script">
<link rel="preload" href="/taro/45aab7e5.8cbc7b03.js" as="script">
<link rel="preload" href="/taro/17896441.09a1fa7a.js" as="script">
<link rel="preload" href="/taro/dd1a0879.24ec7453.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/taro/"><img src="/taro/img/logo-taro.png" alt="Taro logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img alt="Taro logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Taro</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/taro/docs/2.x/README">2.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/taro/docs/next/spec-for-taro">下个版本</a></li><li><a class="dropdown__link" href="/taro/docs/spec-for-taro">3.x</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/taro/docs/2.x/spec-for-taro">2.x</a></li><li><a class="dropdown__link" href="/taro/docs/1.x/spec-for-taro">1.x</a></li><li><a class="dropdown__link" href="/taro/versions">全部版本</a></li></ul></div><a class="navbar__item navbar__link navbar__link--active" href="/taro/docs/2.x/README">文档</a><a class="navbar__item navbar__link" href="/taro/docs/2.x/components-desc">组件库</a><a class="navbar__item navbar__link" href="/taro/docs/2.x/apis/about/desc">API</a><a class="navbar__item navbar__link" href="/taro/docs/guide">教程</a><a class="navbar__item navbar__link" href="/taro/blog">博客</a><a class="navbar__item navbar__link" href="/taro/showcase">案例</a></div><div class="navbar__items navbar__items--right"><a href="https://taro-ui.jd.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Taro UI</a><a href="https://taro-ext.jd.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">物料市场</a><a href="https://taro-club.jd.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">论坛</a><a href="https://taro.jd.com/jdmp/index.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">京东小程序</a><a href="https://github.com/nervjs/taro" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">⌘</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/taro/"><img src="/taro/img/logo-taro.png" alt="Taro logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img alt="Taro logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Taro</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/taro/docs/next/spec-for-taro">下个版本</a></li><li class="menu__list-item"><a class="menu__link" href="/taro/docs/spec-for-taro">3.x</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/taro/docs/2.x/spec-for-taro">2.x</a></li><li class="menu__list-item"><a class="menu__link" href="/taro/docs/1.x/spec-for-taro">1.x</a></li><li class="menu__list-item"><a class="menu__link" href="/taro/versions">全部版本</a></li></ul></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/taro/docs/2.x/README">文档</a></li><li class="menu__list-item"><a class="menu__link" href="/taro/docs/2.x/components-desc">组件库</a></li><li class="menu__list-item"><a class="menu__link" href="/taro/docs/2.x/apis/about/desc">API</a></li><li class="menu__list-item"><a class="menu__link" href="/taro/docs/guide">教程</a></li><li class="menu__list-item"><a class="menu__link" href="/taro/blog">博客</a></li><li class="menu__list-item"><a class="menu__link" href="/taro/showcase">案例</a></li><li class="menu__list-item"><a href="https://taro-ui.jd.com" target="_blank" rel="noopener noreferrer" class="menu__link">Taro UI</a></li><li class="menu__list-item"><a href="https://taro-ext.jd.com" target="_blank" rel="noopener noreferrer" class="menu__link">物料市场</a></li><li class="menu__list-item"><a href="https://taro-club.jd.com" target="_blank" rel="noopener noreferrer" class="menu__link">论坛</a></li><li class="menu__list-item"><a href="https://taro.jd.com/jdmp/index.html" target="_blank" rel="noopener noreferrer" class="menu__link">京东小程序</a></li><li class="menu__list-item"><a href="https://github.com/nervjs/taro" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive thin-scrollbar menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">关于Taro</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/README">Taro 介绍</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/taroize">微信小程序转 Taro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/team">Taro 团队</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/join-us">加入我们</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">快速开始</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/GETTING-STARTED">安装及使用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/composition">更多资源</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/before-dev-remind">各端开发前注意</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/specials">常见问题</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">基础教程</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/taro/docs/2.x/spec-for-taro">Taro 规范</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/taro/docs/2.x/tutorial">框架</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/taro/docs/2.x/project-config">项目配置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/taro/docs/2.x/best-practice">最佳实践</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/taro/docs/2.x/router">路由功能</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/taro/docs/2.x/size">设计稿及尺寸单位</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/taro/docs/2.x/static-reference">静态资源引用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/taro/docs/2.x/component-style">组件的外部样式和全局样式</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">语法特性</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/jsx">JSX 简介</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/props">组件化 &amp; Props</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/state">生命周期 &amp; State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/event">事件处理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/condition">条件渲染</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/list">列表渲染</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/functional-component">函数式组件</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/context">Context</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/children">Children 与组合</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/render-props">Render Props</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/ref">Refs 引用</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">多端开发</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/envs">跨平台开发</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/envs-debug">多端同步调试</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/relations">小程序原生作用域获取</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/wxcloudbase">小程序云开发模板</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/miniprogram-plugin">小程序插件开发</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/quick-app">快应用端开发流程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/react-native">React Native 端开发流程</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/taro/docs/2.x/debug">Debug 指南</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">进阶指南</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/config">编译配置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/config-detail">编译配置详情</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/plugin">插件功能</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/styles-processor">CSS 预处理器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/script-compressor">JS 代码压缩</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/debug-config">单步调测配置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/hooks">Hooks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/ui-lib">基于 Taro 开发第三方多端 UI 库</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/async-await">异步编程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/mini-third-party">使用小程序原生第三方组件和插件</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/hybrid">Taro 代码与小程序代码混写</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/optimized-practice">性能优化实践</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">迁移指南</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/migrate-to-2">迁移至 Taro 2.x</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">社区生态</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/redux">使用 Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/mobx">使用 MobX</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/css-modules">使用 CSS Modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/template">项目模板</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/youshu">腾讯有数无痕埋点能力</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/report">接入统计平台</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/learn">社区贡献的学习教程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/join-in">加入社区共建</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/taro/docs/2.x/CONTRIBUTING">CONTRIBUTING</a></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_2Tub"></button></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div></div><div class="docItemContainer_3QWW"><article><div><span class="badge badge--secondary">Version: 2.x</span></div><header><h1 class="docTitle_1Lrw">Taro 规范</h1></header><div class="markdown"><h2 id="项目组织">项目组织</h2><h3 id="文件组织形式">文件组织形式</h3><blockquote><p>以下文件组织规范为最佳实践的建议</p></blockquote><p>所有项目源代码请放在项目根目录 <code>src</code> 目录下，项目所需最基本的文件包括 <strong>入口文件</strong> 以及 <strong>页面文件</strong></p><ul><li>入口文件为 <code>app.js</code></li><li>页面文件建议放置在 <code>src/pages</code> 目录下</li></ul><p>一个可靠的 Taro 项目可以按照如下方式进行组织</p><pre><code>├── config                 配置目录
|   ├── dev.js             开发时配置
|   ├── index.js           默认配置
|   └── prod.js            打包时配置
├── src                    源码目录
|   ├── components         公共组件目录
|   ├── pages              页面文件目录
|   |   ├── index          index 页面目录
|   |   |   ├── banner     页面 index 私有组件
|   |   |   ├── index.js   index 页面逻辑
|   |   |   └── index.css  index 页面样式
|   ├── utils              公共方法库
|   ├── app.css            项目总通用样式
|   └── app.js             项目入口文件
└── package.json
</code></pre><h3 id="文件命名">文件命名</h3><p>Taro 中普通 JS/TS 文件以小写字母命名，多个单词以下划线连接，例如 <code>util.js</code>、<code>util_helper.js</code></p><p>Taro 组件文件命名遵循 Pascal 命名法，例如 <code>ReservationCard.jsx</code></p><h3 id="文件后缀">文件后缀</h3><p>Taro 中普通 JS/TS 文件以 <code>.js</code> 或者 <code>.ts</code> 作为文件后缀</p><p>Taro 组件则以 <code>.jsx</code> 或者 <code>.tsx</code>  作为文件后缀，当然这不是强制约束，只是作为一个实践的建议，组件文件依然可以以 <code>.js</code> 或者 <code>.ts</code> 作为文件后缀</p><h2 id="javascript-书写规范">JavaScript 书写规范</h2><p>在 Taro 中书写 JavaScript 请遵循以下规则</p><h3 id="基本书写">基本书写</h3><h4 id="使用两个空格进行缩进">使用两个空格进行缩进</h4><blockquote><p>不要混合使用空格与制表符作为缩进</p></blockquote><pre><code class="language-javascript">function hello (name) {
  console.log(&#x27;hi&#x27;, name)   // ✓ 正确
    console.log(&#x27;hello&#x27;, name)   // ✗ 错误
}
</code></pre><h4 id="除了缩进，不要使用多个空格">除了缩进，不要使用多个空格</h4><pre><code class="language-javascript">const id =    1234    // ✗ 错误
const id = 1234       // ✓ 正确
</code></pre><h4 id="不要在句末使用分号">不要在句末使用分号</h4><pre><code class="language-javascript">const a = &#x27;a&#x27;   // ✓ 正确
const a = &#x27;a&#x27;;  // ✗ 错误
</code></pre><h4 id="字符串统一使用单引号">字符串统一使用单引号</h4><pre><code class="language-javascript">console.log(&#x27;hello there&#x27;)
// 如果遇到需要转义的情况，请按如下三种写法书写
const x = &#x27;hello &quot;world&quot;&#x27;
const y = &#x27;hello \&#x27;world\&#x27;&#x27;
const z = `hello &#x27;world&#x27;`
</code></pre><h4 id="代码块中避免多余留白">代码块中避免多余留白</h4><pre><code class="language-javascript">if (user) {
                            // ✗ 错误
  const name = getName()
 
}

if (user) {
  const name = getName()    // ✓ 正确
}
</code></pre><h4 id="关键字后面加空格">关键字后面加空格</h4><pre><code class="language-javascript">if (condition) { ... }   // ✓ 正确
if(condition) { ... }    // ✗ 错误
</code></pre><h4 id="函数声明时括号与函数名间加空格">函数声明时括号与函数名间加空格</h4><pre><code class="language-javascript">function name (arg) { ... }   // ✓ 正确
function name(arg) { ... }    // ✗ 错误

run(function () { ... })      // ✓ 正确
run(function() { ... })       // ✗ 错误
</code></pre><h4 id="展开运算符与它的表达式间不要留空白">展开运算符与它的表达式间不要留空白</h4><pre><code class="language-javascript">fn(... args)    // ✗ 错误
fn(...args)     // ✓ 正确
</code></pre><h4 id="遇到分号时空格要后留前不留">遇到分号时空格要后留前不留</h4><pre><code class="language-javascript">for (let i = 0 ;i &lt; items.length ;i++) {...}    // ✗ 错误
for (let i = 0; i &lt; items.length; i++) {...}    // ✓ 正确
</code></pre><h4 id="代码块首尾留空格">代码块首尾留空格</h4><pre><code class="language-javascript">if (admin){...}     // ✗ 错误
if (admin) {...}    // ✓ 正确
</code></pre><h4 id="圆括号间不留空格">圆括号间不留空格</h4><pre><code class="language-javascript">getName( name )     // ✗ 错误
getName(name)       // ✓ 正确
</code></pre><h4 id="属性前面不要加空格">属性前面不要加空格</h4><pre><code class="language-javascript">user .name      // ✗ 错误
user.name       // ✓ 正确
</code></pre><h4 id="一元运算符前面跟一个空格">一元运算符前面跟一个空格</h4><pre><code class="language-javascript">typeof!admin        // ✗ 错误
typeof !admin        // ✓ 正确
</code></pre><h4 id="注释首尾留空格">注释首尾留空格</h4><pre><code class="language-javascript">//comment           // ✗ 错误
// comment          // ✓ 正确

/*comment*/         // ✗ 错误
/* comment */       // ✓ 正确
</code></pre><h4 id="模板字符串中变量前后不加空格">模板字符串中变量前后不加空格</h4><pre><code class="language-javascript">const message = `Hello, ${ name }`    // ✗ 错误
const message = `Hello, ${name}`      // ✓ 正确
</code></pre><h4 id="逗号后面加空格">逗号后面加空格</h4><pre><code class="language-javascript">// ✓ 正确
const list = [1, 2, 3, 4]
function greet (name, options) { ... }
</code></pre><pre><code class="language-javascript">// ✗ 错误
const list = [1,2,3,4]
function greet (name,options) { ... }
</code></pre><h4 id="不允许有连续多行空行">不允许有连续多行空行</h4><pre><code class="language-javascript">// ✓ 正确
const value = &#x27;hello world&#x27;
console.log(value)
</code></pre><pre><code class="language-javascript">// ✗ 错误
const value = &#x27;hello world&#x27;



console.log(value)
</code></pre><h4 id="单行代码块两边加空格">单行代码块两边加空格</h4><pre><code class="language-javascript">function foo () {return true}    // ✗ 错误
function foo () { return true }  // ✓ 正确
if (condition) { return true }  // ✓ 正确
</code></pre><h4 id="不要使用非法的空白符">不要使用非法的空白符</h4><pre><code class="language-javascript">function myFunc () /*&lt;NBSP&gt;*/{}   // ✗ 错误
</code></pre><h4 id="始终将逗号置于行末">始终将逗号置于行末</h4><pre><code class="language-javascript">const obj = {
  foo: &#x27;foo&#x27;
  ,bar: &#x27;bar&#x27;   // ✗ 错误
}

const obj = {
  foo: &#x27;foo&#x27;,
  bar: &#x27;bar&#x27;   // ✓ 正确
}
</code></pre><h4 id="点号操作符须与属性需在同一行">点号操作符须与属性需在同一行</h4><pre><code class="language-javascript">console.log(&#x27;hello&#x27;)  // ✓ 正确

console.
  log(&#x27;hello&#x27;)  // ✗ 错误

console
  .log(&#x27;hello&#x27;) // ✓ 正确
</code></pre><h4 id="文件末尾留一空行">文件末尾留一空行</h4><h4 id="函数调用时标识符与括号间不留间隔">函数调用时标识符与括号间不留间隔</h4><pre><code class="language-javascript">console.log (&#x27;hello&#x27;) // ✗ 错误
console.log(&#x27;hello&#x27;)  // ✓ 正确
</code></pre><h4 id="键值对当中冒号与值之间要留空白">键值对当中冒号与值之间要留空白</h4><pre><code class="language-javascript">const obj = { &#x27;key&#x27; : &#x27;value&#x27; }    // ✗ 错误
const obj = { &#x27;key&#x27; :&#x27;value&#x27; }     // ✗ 错误
const obj = { &#x27;key&#x27;:&#x27;value&#x27; }      // ✗ 错误
const obj = { &#x27;key&#x27;: &#x27;value&#x27; }     // ✓ 正确
</code></pre><h3 id="变量定义">变量定义</h3><h4 id="使用-constlet-定义变量">使用 const/let 定义变量</h4><blockquote><p>当前作用域不需要改变的变量使用 <code>const</code>，反之则使用 <code>let</code></p></blockquote><pre><code class="language-javascript">const a = &#x27;a&#x27;
a = &#x27;b&#x27;   // ✗ 错误，请使用 let 定义

let test = &#x27;test&#x27;

var noVar = &#x27;hello, world&#x27;   // ✗ 错误，请使用 const/let 定义变量
</code></pre><h4 id="每个-constlet-关键字单独声明一个变量">每个 const/let 关键字单独声明一个变量</h4><pre><code class="language-javascript">// ✓ 正确
const silent = true
let verbose = true

// ✗ 错误
const silent = true, verbose = true

// ✗ 错误
let silent = true,
    verbose = true
</code></pre><h4 id="不要重复声明变量">不要重复声明变量</h4><pre><code class="language-javascript">let name = &#x27;John&#x27;
let name = &#x27;Jane&#x27;     // ✗ 错误

let name = &#x27;John&#x27;
name = &#x27;Jane&#x27;         // ✓ 正确
</code></pre><h4 id="不要使用-undefined-来初始化变量">不要使用 undefined 来初始化变量</h4><pre><code class="language-javascript">let name = undefined    // ✗ 错误

let name
name = &#x27;value&#x27;          // ✓ 正确
</code></pre><h4 id="对于变量和函数名统一使用驼峰命名法">对于变量和函数名统一使用驼峰命名法</h4><pre><code class="language-javascript">function my_function () { }    // ✗ 错误
function myFunction () { }     // ✓ 正确

const my_var = &#x27;hello&#x27;           // ✗ 错误
const myVar = &#x27;hello&#x27;            // ✓ 正确
</code></pre><h4 id="不要定义未使用的变量">不要定义未使用的变量</h4><pre><code class="language-javascript">function myFunction () {
  const result = something()   // ✗ 错误
}
</code></pre><h4 id="避免将变量赋值给自己">避免将变量赋值给自己</h4><pre><code class="language-javascript">name = name   // ✗ 错误
</code></pre><h3 id="基本类型">基本类型</h3><h4 id="不要省去小数点前面的-0">不要省去小数点前面的 0</h4><pre><code class="language-javascript">const discount = .5      // ✗ 错误
const discount = 0.5     // ✓ 正确
</code></pre><h4 id="字符串拼接操作符-infix-operators-之间要留空格">字符串拼接操作符 (Infix operators) 之间要留空格</h4><pre><code class="language-javascript">// ✓ 正确
const x = 2
const message = &#x27;hello, &#x27; + name + &#x27;!&#x27;
</code></pre><pre><code class="language-javascript">// ✗ 错误
const x=2
const message = &#x27;hello, &#x27;+name+&#x27;!&#x27;
</code></pre><h4 id="不要使用多行字符串">不要使用多行字符串</h4><pre><code class="language-javascript">const message = &#x27;Hello \
                 world&#x27;     // ✗ 错误
</code></pre><h4 id="检查-nan-的正确姿势是使用-isnan">检查 NaN 的正确姿势是使用 isNaN()</h4><pre><code class="language-javascript">if (price === NaN) { }      // ✗ 错误
if (isNaN(price)) { }       // ✓ 正确
</code></pre><h4 id="用合法的字符串跟-typeof-进行比较操作">用合法的字符串跟 typeof 进行比较操作</h4><pre><code class="language-javascript">typeof name === undefined       // ✗ 错误
typeof name === &#x27;undefined&#x27;     // ✓ 正确
</code></pre><h3 id="对象与数组">对象与数组</h3><h4 id="对象中定义了存值器，一定要对应的定义取值器">对象中定义了存值器，一定要对应的定义取值器</h4><pre><code class="language-javascript">const person = {
  set name (value) {    // ✗ 错误
    this._name = value
  }
}

const person = {
  set name (value) {
    this._name = value
  },
  get name () {         // ✓ 正确
    return this._name
  }
}
</code></pre><h4 id="使用数组字面量而不是构造器">使用数组字面量而不是构造器</h4><pre><code class="language-javascript">const nums = new Array(1, 2, 3)   // ✗ 错误
const nums = [1, 2, 3]            // ✓ 正确
</code></pre><h4 id="不要解构空值">不要解构空值</h4><pre><code class="language-javascript">const { a: {} } = foo         // ✗ 错误
const { a: { b } } = foo      // ✓ 正确
</code></pre><h4 id="对象字面量中不要定义重复的属性">对象字面量中不要定义重复的属性</h4><pre><code class="language-javascript">const user = {
  name: &#x27;Jane Doe&#x27;,
  name: &#x27;John Doe&#x27;    // ✗ 错误
}
</code></pre><h4 id="不要扩展原生对象">不要扩展原生对象</h4><pre><code class="language-javascript">Object.prototype.age = 21     // ✗ 错误
</code></pre><h4 id="外部变量不要与对象属性重名">外部变量不要与对象属性重名</h4><pre><code class="language-javascript">let score = 100
function game () {
  score: while (true) {      // ✗ 错误
    score -= 10
    if (score &gt; 0) continue score
    break
  }
}
</code></pre><h4 id="对象属性换行时注意统一代码风格">对象属性换行时注意统一代码风格</h4><pre><code class="language-javascript">const user = {
  name: &#x27;Jane Doe&#x27;, age: 30,
  username: &#x27;jdoe86&#x27;            // ✗ 错误
}

const user = { name: &#x27;Jane Doe&#x27;, age: 30, username: &#x27;jdoe86&#x27; }    // ✓ 正确

const user = {
  name: &#x27;Jane Doe&#x27;,
  age: 30,
  username: &#x27;jdoe86&#x27;
}
</code></pre><h4 id="避免使用不必要的计算值作对象属性">避免使用不必要的计算值作对象属性</h4><pre><code class="language-javascript">const user = { [&#x27;name&#x27;]: &#x27;John Doe&#x27; }   // ✗ 错误
const user = { name: &#x27;John Doe&#x27; }       // ✓ 正确
</code></pre><h3 id="函数">函数</h3><h4 id="避免使用-argumentscallee-和-argumentscaller">避免使用 arguments.callee 和 arguments.caller</h4><pre><code class="language-javascript">function foo (n) {
  if (n &lt;= 0) return

  arguments.callee(n - 1)   // ✗ 错误
}

function foo (n) {
  if (n &lt;= 0) return

  foo(n - 1)
}
</code></pre><h4 id="不要定义冗余的函数参数">不要定义冗余的函数参数</h4><pre><code class="language-javascript">function sum (a, b, a) {  // ✗ 错误
  // ...
}

function sum (a, b, c) {  // ✓ 正确
  // ...
}
</code></pre><h4 id="避免多余的函数上下文绑定">避免多余的函数上下文绑定</h4><pre><code class="language-javascript">const name = function () {
  getName()
}.bind(user)    // ✗ 错误

const name = function () {
  this.getName()
}.bind(user)    // ✓ 正确
</code></pre><h4 id="不要使用-eval">不要使用 eval()</h4><pre><code class="language-javascript">eval( &quot;var result = user.&quot; + propName ) // ✗ 错误
const result = user[propName]             // ✓ 正确
</code></pre><h4 id="不要使用多余的括号包裹函数">不要使用多余的括号包裹函数</h4><pre><code class="language-javascript">const myFunc = (function () { })   // ✗ 错误
const myFunc = function () { }     // ✓ 正确
</code></pre><h4 id="避免对声明过的函数重新赋值">避免对声明过的函数重新赋值</h4><pre><code class="language-javascript">function myFunc () { }
myFunc = myOtherFunc    // ✗ 错误
</code></pre><h4 id="注意隐式的-eval">注意隐式的 eval()</h4><pre><code class="language-javascript">setTimeout(&quot;alert(&#x27;Hello world&#x27;)&quot;)                   // ✗ 错误
setTimeout(function () { alert(&#x27;Hello world&#x27;) })     // ✓ 正确
</code></pre><h4 id="嵌套的代码块中禁止再定义函数">嵌套的代码块中禁止再定义函数</h4><pre><code class="language-javascript">if (authenticated) {
  function setAuthUser () {}    // ✗ 错误
}
</code></pre><h4 id="禁止使用-function-构造器">禁止使用 Function 构造器</h4><pre><code class="language-javascript">const sum = new Function(&#x27;a&#x27;, &#x27;b&#x27;, &#x27;return a + b&#x27;)    // ✗ 错误
</code></pre><h4 id="禁止使用-object-构造器">禁止使用 Object 构造器</h4><pre><code class="language-javascript">let config = new Object()   // ✗ 错误
</code></pre><h4 id="自调用匿名函数-iifes-使用括号包裹">自调用匿名函数 (IIFEs) 使用括号包裹</h4><pre><code class="language-javascript">const getName = function () { }()     // ✗ 错误

const getName = (function () { }())   // ✓ 正确
const getName = (function () { })()   // ✓ 正确
</code></pre><h4 id="不使用-generator-函数语法">不使用 Generator 函数语法</h4><blockquote><p>使用 <code>Promise</code> 或者 <code>async functions</code> 来实现异步编程</p></blockquote><pre><code class="language-javascript">function* helloWorldGenerator() {     // ✗ 错误
  yield &#x27;hello&#x27;;
  yield &#x27;world&#x27;;
  return &#x27;ending&#x27;;
}
</code></pre><h3 id="正则">正则</h3><h4 id="正则中不要使用控制符">正则中不要使用控制符</h4><pre><code class="language-javascript">const pattern = /\x1f/    // ✗ 错误
const pattern = /\x20/    // ✓ 正确
</code></pre><h4 id="正则中避免使用多个空格">正则中避免使用多个空格</h4><pre><code class="language-javascript">const regexp = /test   value/   // ✗ 错误

const regexp = /test {3}value/  // ✓ 正确
const regexp = /test value/     // ✓ 正确
</code></pre><h3 id="类定义">类定义</h3><h4 id="类名要以大写字母开头">类名要以大写字母开头</h4><pre><code class="language-javascript">class animal {}
const dog = new animal()    // ✗ 错误

class Animal {}
const dog = new Animal()    // ✓ 正确
</code></pre><h4 id="避免对类名重新赋值">避免对类名重新赋值</h4><pre><code class="language-javascript">class Dog {}
Dog = &#x27;Fido&#x27;    // ✗ 错误
</code></pre><h4 id="子类的构造器中一定要调用-super">子类的构造器中一定要调用 super</h4><pre><code class="language-javascript">class Dog {
  constructor () {
    super()   // ✗ 错误
  }
}

class Dog extends Mammal {
  constructor () {
    super()   // ✓ 正确
  }
}
</code></pre><h4 id="使用-this-前请确保-super-已调用">使用 this 前请确保 super() 已调用</h4><pre><code class="language-javascript">class Dog extends Animal {
  constructor () {
    this.legs = 4     // ✗ 错误
    super()
  }
}
</code></pre><h4 id="禁止多余的构造器">禁止多余的构造器</h4><pre><code class="language-javascript">class Car {
  constructor () {      // ✗ 错误
  }
}

class Car {
  constructor () {      // ✗ 错误
    super()
  }
}
</code></pre><h4 id="类中不要定义冗余的属性">类中不要定义冗余的属性</h4><pre><code class="language-javascript">class Dog {
  bark () {}
  bark () {}    // ✗ 错误
}
</code></pre><h4 id="无参的构造函数调用时要带上括号">无参的构造函数调用时要带上括号</h4><pre><code class="language-javascript">function Animal () {}
const dog = new Animal    // ✗ 错误
const dog = new Animal()  // ✓ 正确
</code></pre><h4 id="new-创建对象实例后需要赋值给变量">new 创建对象实例后需要赋值给变量</h4><pre><code class="language-javascript">new Character()                     // ✗ 错误
const character = new Character()   // ✓ 正确
</code></pre><h3 id="模块">模块</h3><h4 id="同一模块有多个导入时一次性写完">同一模块有多个导入时一次性写完</h4><pre><code class="language-javascript">import { myFunc1 } from &#x27;module&#x27;
import { myFunc2 } from &#x27;module&#x27;          // ✗ 错误

import { myFunc1, myFunc2 } from &#x27;module&#x27; // ✓ 正确
</code></pre><h4 id="import-export-和解构操作中，禁止赋值到同名变量">import, export 和解构操作中，禁止赋值到同名变量</h4><pre><code class="language-javascript">import { config as config } from &#x27;./config&#x27;     // ✗ 错误
import { config } from &#x27;./config&#x27;               // ✓ 正确
</code></pre><h3 id="语句">语句</h3><h4 id="避免在-return-语句中出现赋值语句">避免在 return 语句中出现赋值语句</h4><pre><code class="language-javascript">function sum (a, b) {
  return result = a + b     // ✗ 错误
}
</code></pre><h4 id="禁止使用-with">禁止使用 with</h4><pre><code class="language-javascript">with (val) {...}    // ✗ 错误
</code></pre><h4 id="不要使用标签语句">不要使用标签语句</h4><pre><code class="language-javascript">label:
  while (true) {
    break label     // ✗ 错误
  }
</code></pre><h4 id="不要随意更改关键字的值">不要随意更改关键字的值</h4><pre><code class="language-javascript">let undefined = &#x27;value&#x27;     // ✗ 错误
</code></pre><h4 id="return，throw，continue-和-break-后不要再跟代码">return，throw，continue 和 break 后不要再跟代码</h4><pre><code class="language-javascript">function doSomething () {
  return true
  console.log(&#x27;never called&#x27;)     // ✗ 错误
}
</code></pre><h3 id="逻辑与循环">逻辑与循环</h3><h4 id="始终使用--替代-">始终使用 === 替代 ==</h4><blockquote><p>例外： obj == null 可以用来检查 null || undefined</p></blockquote><pre><code class="language-javascript">if (name === &#x27;John&#x27;)   // ✓ 正确
if (name == &#x27;John&#x27;)    // ✗ 错误
</code></pre><pre><code class="language-javascript">if (name !== &#x27;John&#x27;)   // ✓ 正确
if (name != &#x27;John&#x27;)    // ✗ 错误
</code></pre><h4 id="避免将变量与自己进行比较操作">避免将变量与自己进行比较操作</h4><pre><code class="language-javascript">if (score === score) {}   // ✗ 错误
</code></pre><h4 id="ifelse-关键字要与花括号保持在同一行">if/else 关键字要与花括号保持在同一行</h4><pre><code class="language-javascript">// ✓ 正确
if (condition) {
  // ...
} else {
  // ...
}
</code></pre><pre><code class="language-javascript">// ✗ 错误
if (condition)
{
  // ...
}
else
{
  // ...
}
</code></pre><h4 id="多行-if-语句的的括号不能省略">多行 if 语句的的括号不能省略</h4><pre><code class="language-javascript">// ✓ 正确
if (options.quiet !== true) console.log(&#x27;done&#x27;)
</code></pre><pre><code class="language-javascript">// ✓ 正确
if (options.quiet !== true) {
  console.log(&#x27;done&#x27;)
}
</code></pre><pre><code class="language-javascript">// ✗ 错误
if (options.quiet !== true)
  console.log(&#x27;done&#x27;)
</code></pre><h4 id="对于三元运算符--和--与他们所负责的代码处于同一行">对于三元运算符 ? 和 : 与他们所负责的代码处于同一行</h4><pre><code class="language-javascript">// ✓ 正确
const location = env.development ? &#x27;localhost&#x27; : &#x27;www.api.com&#x27;

// ✓ 正确
const location = env.development
  ? &#x27;localhost&#x27;
  : &#x27;www.api.com&#x27;

// ✗ 错误
const location = env.development ?
  &#x27;localhost&#x27; :
  &#x27;www.api.com&#x27;
</code></pre><h4 id="请书写优雅的条件语句（avoid-yoda-conditions）">请书写优雅的条件语句（avoid Yoda conditions）</h4><pre><code class="language-javascript">if (42 === age) { }    // ✗ 错误
if (age === 42) { }    // ✓ 正确
</code></pre><h4 id="避免使用常量作为条件表达式的条件（循环语句除外）">避免使用常量作为条件表达式的条件（循环语句除外）</h4><pre><code class="language-javascript">if (false) {    // ✗ 错误
  // ...
}

if (x === 0) {  // ✓ 正确
  // ...
}

while (true) {  // ✓ 正确
  // ...
}
</code></pre><h4 id="循环语句中注意更新循环变量">循环语句中注意更新循环变量</h4><pre><code class="language-javascript">for (let i = 0; i &lt; items.length; j++) {...}    // ✗ 错误
for (let i = 0; i &lt; items.length; i++) {...}    // ✓ 正确
</code></pre><h4 id="如果有更好的实现，尽量不要使用三元表达式">如果有更好的实现，尽量不要使用三元表达式</h4><pre><code class="language-javascript">let score = val ? val : 0     // ✗ 错误
let score = val || 0          // ✓ 正确
</code></pre><h4 id="switch-语句中不要定义重复的-case-分支">switch 语句中不要定义重复的 case 分支</h4><pre><code class="language-javascript">switch (id) {
  case 1:
    // ...
  case 1:     // ✗ 错误
}
</code></pre><h4 id="switch-一定要使用-break-来将条件分支正常中断">switch 一定要使用 break 来将条件分支正常中断</h4><pre><code class="language-javascript">switch (filter) {
  case 1:
    doSomething()    // ✗ 错误
  case 2:
    doSomethingElse()
}

switch (filter) {
  case 1:
    doSomething()
    break           // ✓ 正确
  case 2:
    doSomethingElse()
}

switch (filter) {
  case 1:
    doSomething()
    // fallthrough  // ✓ 正确
  case 2:
    doSomethingElse()
}
</code></pre><h4 id="避免不必要的布尔转换">避免不必要的布尔转换</h4><pre><code class="language-javascript">const result = true
if (!!result) {   // ✗ 错误
  // ...
}

const result = true
if (result) {     // ✓ 正确
  // ...
}
</code></pre><h4 id="避免使用逗号操作符">避免使用逗号操作符</h4><pre><code class="language-javascript">if (doSomething(), !!test) {}   // ✗ 错误
</code></pre><h3 id="错误处理">错误处理</h3><h4 id="不要丢掉异常处理中-err-参数">不要丢掉异常处理中 err 参数</h4><pre><code class="language-javascript">// ✓ 正确
run(function (err) {
  if (err) throw err
  window.alert(&#x27;done&#x27;)
})
</code></pre><pre><code class="language-javascript">// ✗ 错误
run(function (err) {
  window.alert(&#x27;done&#x27;)
})
</code></pre><h4 id="catch-中不要对错误重新赋值">catch 中不要对错误重新赋值</h4><pre><code class="language-javascript">try {
  // ...
} catch (e) {
  e = &#x27;new value&#x27;             // ✗ 错误
}

try {
  // ...
} catch (e) {
  const newVal = &#x27;new value&#x27;  // ✓ 正确
}
</code></pre><h4 id="用-throw-抛错时，抛出-error-对象而不是字符串">用 throw 抛错时，抛出 Error 对象而不是字符串</h4><pre><code class="language-javascript">throw &#x27;error&#x27;               // ✗ 错误
throw new Error(&#x27;error&#x27;)    // ✓ 正确
</code></pre><h4 id="finally-代码块中不要再改变程序执行流程">finally 代码块中不要再改变程序执行流程</h4><pre><code class="language-javascript">try {
  // ...
} catch (e) {
  // ...
} finally {
  return 42     // ✗ 错误
}
</code></pre><h4 id="使用-promise-一定要捕捉错误">使用 Promise 一定要捕捉错误</h4><pre><code class="language-javascript">asyncTask(&#x27;google.com&#x27;).catch(err =&gt; console.log(err))   // ✓ 正确
</code></pre><h2 id="组件及-jsx-书写规范">组件及 JSX 书写规范</h2><h3 id="基本书写-1">基本书写</h3><h4 id="组件创建">组件创建</h4><p>Taro 中组件以类的形式进行创建，并且单个文件中只能存在单个组件</p><h4 id="代码缩进">代码缩进</h4><blockquote><p>使用两个空格进行缩进，不要混合使用空格与制表符作为缩进</p></blockquote><pre><code class="language-javascript">import Taro, { Component } from &#x27;@tarojs/taro&#x27;
import { View, Text } from &#x27;@tarojs/components&#x27;

class MyComponent extends Component {
  render () {
    return (
      &lt;View className=&#x27;test&#x27;&gt;     // ✓ 正确
        &lt;Text&gt;12&lt;/Text&gt;     // ✗ 错误
      &lt;/View&gt;
    )
  }
}
</code></pre><h4 id="单引号">单引号</h4><blockquote><p>JSX 属性均使用单引号</p></blockquote><pre><code class="language-javascript">import Taro, { Component } from &#x27;@tarojs/taro&#x27;
import { View, Input } from &#x27;@tarojs/components&#x27;

class MyComponent extends Component {
  render () {
    return (
      &lt;View className=&#x27;test&#x27;&gt;     // ✓ 正确
        &lt;Text className=&quot;test_text&quot;&gt;12&lt;/Text&gt;     // ✗ 错误
      &lt;/View&gt;
    )
  }
}
</code></pre><h4 id="对齐方式">对齐方式</h4><blockquote><p>多个属性，多行书写，每个属性占用一行，标签结束另起一行</p></blockquote><pre><code class="language-javascript">// bad
&lt;Foo superLongParam=&#x27;bar&#x27;
     anotherSuperLongParam=&#x27;baz&#x27; /&gt;

// good
&lt;Foo
  superLongParam=&#x27;bar&#x27;
  anotherSuperLongParam=&#x27;baz&#x27;
/&gt;

// 如果组件的属性可以放在一行就保持在当前一行中
&lt;Foo bar=&#x27;bar&#x27; /&gt;

// 多行属性采用缩进
&lt;Foo
  superLongParam=&#x27;bar&#x27;
  anotherSuperLongParam=&#x27;baz&#x27;
&gt;
  &lt;Quux /&gt;
&lt;/Foo&gt;
</code></pre><h4 id="空格使用">空格使用</h4><blockquote><p>终始在自闭合标签前面添加一个空格</p></blockquote><pre><code class="language-javascript">// bad
&lt;Foo/&gt;

// very bad
&lt;Foo                 /&gt;

// bad
&lt;Foo
 /&gt;

// good
&lt;Foo /&gt;
</code></pre><h4 id="属性书写">属性书写</h4><blockquote><p>属性名称始终使用驼峰命名法</p></blockquote><pre><code class="language-javascript">// bad
&lt;Foo
  UserName=&#x27;hello&#x27;
  phone_number={12345678}
/&gt;

// good
&lt;Foo
  userName=&#x27;hello&#x27;
  phoneNumber={12345678}
/&gt;
</code></pre><h4 id="jsx-与括号">JSX 与括号</h4><blockquote><p>用括号包裹多行 JSX 标签</p></blockquote><pre><code class="language-javascript">
// bad
render () {
  return &lt;MyComponent className=&#x27;long body&#x27; foo=&#x27;bar&#x27;&gt;
           &lt;MyChild /&gt;
         &lt;/MyComponent&gt;
}

// good
render () {
  return (
    &lt;MyComponent className=&#x27;long body&#x27; foo=&#x27;bar&#x27;&gt;
      &lt;MyChild /&gt;
    &lt;/MyComponent&gt;
  )
}

// good
render () {
  const body = &lt;div&gt;hello&lt;/div&gt;
  return &lt;MyComponent&gt;{body}&lt;/MyComponent&gt;
}
</code></pre><h4 id="标签">标签</h4><blockquote><p>当标签没有子元素时，始终使用自闭合标签</p></blockquote><pre><code class="language-javascript">// bad
&lt;Foo className=&#x27;stuff&#x27;&gt;&lt;/Foo&gt;

// good
&lt;Foo className=&#x27;stuff&#x27; /&gt;
</code></pre><blockquote><p>如果控件有多行属性，关闭标签要另起一行</p></blockquote><pre><code class="language-javascript">// bad
&lt;Foo
  bar=&#x27;bar&#x27;
  baz=&#x27;baz&#x27; /&gt;

// good
&lt;Foo
  bar=&#x27;bar&#x27;
  baz=&#x27;baz&#x27;
/&gt;
</code></pre><h4 id="书写顺序">书写顺序</h4><p>在 Taro 组件中会包含类静态属性、类属性、生命周期等的类成员，其书写顺序最好遵循以下约定（顺序从上至下）</p><ol><li>static 静态方法</li><li>constructor</li><li>componentWillMount</li><li>componentDidMount</li><li>componentWillReceiveProps</li><li>shouldComponentUpdate</li><li>componentWillUpdate</li><li>componentDidUpdate</li><li>componentWillUnmount</li><li>点击回调或者事件回调 比如 <code>onClickSubmit()</code> 或者 <code>onChangeDescription()</code></li><li>render</li></ol><h3 id="通用约束与建议">通用约束与建议</h3><h4 id="所有内置组件均需要引入后再使用">所有内置组件均需要引入后再使用</h4><pre><code class="language-javascript">import Taro, { Component } from &#x27;@tarojs/taro&#x27;
import { View } from &#x27;@tarojs/components&#x27;

class MyComponent extends Component {
  render () {
    return (
      &lt;View className=&#x27;test&#x27;&gt;     // ✓ 正确
        &lt;Text&gt;12&lt;/Text&gt;     // ✗ 错误
      &lt;/View&gt;
    )
  }
}
</code></pre><h4 id="推荐使用对象解构的方式来使用-state、props">推荐使用对象解构的方式来使用 state、props</h4><pre><code class="language-javascript">import Taro, { Component } from &#x27;@tarojs/taro&#x27;
import { View, Input } from &#x27;@tarojs/components&#x27;

class MyComponent extends Component {
  state = {
    myTime: 12
  }
  render () {
    const { isEnable } = this.props     // ✓ 正确
    const { myTime } = this.state     // ✓ 正确
    return (
      &lt;View className=&#x27;test&#x27;&gt;
        {isEnable &amp;&amp; &lt;Text className=&#x27;test_text&#x27;&gt;{myTime}&lt;/Text&gt;}
      &lt;/View&gt;
    )
  }
}
</code></pre><h4 id="不要以-classidstyle-作为自定义组件的属性名">不要以 class/id/style 作为自定义组件的属性名</h4><pre><code class="language-javascript">&lt;Hello class=&#x27;foo&#x27; /&gt;     // ✗ 错误
&lt;Hello id=&#x27;foo&#x27; /&gt;     // ✗ 错误
&lt;Hello style=&#x27;foo&#x27; /&gt;     // ✗ 错误
</code></pre><h4 id="不要使用-html-标签">不要使用 HTML 标签</h4><pre><code class="language-javascript">&lt;div className=&#x27;foo&#x27;&gt;&lt;/div&gt;     // ✗ 错误
&lt;span id=&#x27;foo&#x27; /&gt;&lt;/span&gt;    // ✗ 错误
</code></pre><h4 id="不要在调用-thissetstate-时使用-thisstate">不要在调用 this.setState 时使用 this.state</h4><blockquote><p>由于 this.setState 异步的缘故，这样的做法会导致一些错误，可以通过给 this.setState 传入函数来避免</p></blockquote><pre><code class="language-javascript">this.setState({
  value: this.state.value + 1
})   // ✗ 错误


this.setState(prevState =&gt; ({ value: prevState.value + 1 }))    // ✓ 正确

</code></pre><h4 id="map-循环时请给元素加上-key-属性">map 循环时请给元素加上 key 属性</h4><pre><code class="language-javascript">list.map(item =&gt; {
  return (
    &lt;View className=&#x27;list_item&#x27; key={item.id}&gt;{item.name}&lt;/View&gt;
  )
})
</code></pre><h4 id="尽量避免在-componentdidmount-中调用-thissetstate">尽量避免在 componentDidMount 中调用 this.setState</h4><blockquote><p>因为在 <code>componentDidMount</code> 中调用  <code>this.setState</code> 会导致触发更新</p></blockquote><pre><code class="language-javascript">import Taro, { Component } from &#x27;@tarojs/taro&#x27;
import { View, Input } from &#x27;@tarojs/components&#x27;

class MyComponent extends Component {
  state = {
    myTime: 12
  }
  
  componentDidMount () {
    this.setState({     // ✗ 尽量避免，可以在 componentWillMount 中处理
      name: 1
    })
  }
  
  render () {
    const { isEnable } = this.props
    const { myTime } = this.state
    return (
      &lt;View className=&#x27;test&#x27;&gt;
        {isEnable &amp;&amp; &lt;Text className=&#x27;test_text&#x27;&gt;{myTime}&lt;/Text&gt;}
      &lt;/View&gt;
    )
  }
}
</code></pre><h4 id="不要在-componentwillupdatecomponentdidupdaterender-中调用-thissetstate">不要在 componentWillUpdate/componentDidUpdate/render 中调用 this.setState</h4><pre><code class="language-javascript">import Taro, { Component } from &#x27;@tarojs/taro&#x27;
import { View, Input } from &#x27;@tarojs/components&#x27;

class MyComponent extends Component {
  state = {
    myTime: 12
  }
  
  componentWillUpdate () {
    this.setState({     // ✗ 错误
      name: 1
    })
  }
  
  componentDidUpdate () {
    this.setState({     // ✗ 错误
      name: 1
    })
  }
  
  render () {
    const { isEnable } = this.props
    const { myTime } = this.state
    this.setState({     // ✗ 错误
      name: 11
    })
    return (
      &lt;View className=&#x27;test&#x27;&gt;
        {isEnable &amp;&amp; &lt;Text className=&#x27;test_text&#x27;&gt;{myTime}&lt;/Text&gt;}
      &lt;/View&gt;
    )
  }
}
</code></pre><h4 id="不要定义没有用到的-state">不要定义没有用到的 state</h4><pre><code class="language-javascript">import Taro, { Component } from &#x27;@tarojs/taro&#x27;
import { View, Input } from &#x27;@tarojs/components&#x27;

class MyComponent extends Component {
  state = {
    myTime: 12,
    noUsed: true   // ✗ 没有用到
  }
  
  render () {
    const { myTime } = this.state
    return (
      &lt;View className=&#x27;test&#x27;&gt;
        &lt;Text className=&#x27;test_text&#x27;&gt;{myTime}&lt;/Text&gt;
      &lt;/View&gt;
    )
  }
}
</code></pre><h4 id="组件最好定义-defaultprops">组件最好定义 defaultProps</h4><pre><code class="language-javascript">import Taro, { Component } from &#x27;@tarojs/taro&#x27;
import { View, Input } from &#x27;@tarojs/components&#x27;

class MyComponent extends Component {

  static defaultProps = {
    isEnable: true
  }
  
  state = {
    myTime: 12
  }
  
  render () {
    const { isEnable } = this.props
    const { myTime } = this.state

    return (
      &lt;View className=&#x27;test&#x27;&gt;
        {isEnable &amp;&amp; &lt;Text className=&#x27;test_text&#x27;&gt;{myTime}&lt;/Text&gt;}
      &lt;/View&gt;
    )
  }
}
</code></pre><h4 id="render-方法必须有返回值">render 方法必须有返回值</h4><pre><code class="language-javascript">import Taro, { Component } from &#x27;@tarojs/taro&#x27;
import { View, Input } from &#x27;@tarojs/components&#x27;

class MyComponent extends Component {
  state = {
    myTime: 12
  }
  
  render () {   // ✗ 没有返回值
    const { isEnable } = this.props
    const { myTime } = this.state

    &lt;View className=&#x27;test&#x27;&gt;
      {isEnable &amp;&amp; &lt;Text className=&quot;test_text&quot;&gt;{myTime}&lt;/Text&gt;}
    &lt;/View&gt;
  }
}
</code></pre><h4 id="值为-true-的属性可以省略书写值">值为 true 的属性可以省略书写值</h4><pre><code class="language-javascript">&lt;Hello personal /&gt;
&lt;Hello personal={false} /&gt;
</code></pre><h4 id="jsx-属性或者表达式书写时需要注意空格">JSX 属性或者表达式书写时需要注意空格</h4><p>属性书写不带空格，如果属性是一个对象，则对象括号旁边需要带上空格</p><pre><code class="language-javascript">&lt;Hello name={ firstname } /&gt;   // ✗ 错误
&lt;Hello name={ firstname} /&gt;   // ✗ 错误
&lt;Hello name={firstname } /&gt;   // ✗ 错误
&lt;Hello name={{ firstname: &#x27;John&#x27;, lastname: &#x27;Doe&#x27; }} /&gt;      // ✓ 正确
</code></pre><h4 id="事件绑定均以-on-开头">事件绑定均以 on 开头</h4><blockquote><p>在 Taro 中所有默认事件如 <code>onClick</code>、<code>onTouchStart</code> 等等，均以 <code>on</code> 开头</p></blockquote><pre><code class="language-javascript">import Taro, { Component } from &#x27;@tarojs/taro&#x27;
import { View, Input } from &#x27;@tarojs/components&#x27;

class MyComponent extends Component {
  state = {
    myTime: 12
  }

  clickHandler (e) {
    console.log(e)
  }
  
  render () {
    const { myTime } = this.state

    return (
      &lt;View className=&#x27;test&#x27; onClick={this.clickHandler}&gt;    // ✓ 正确
        &lt;Text className=&#x27;test_text&#x27;&gt;{myTime}&lt;/Text&gt;
      &lt;/View&gt;
    )
  }
}
</code></pre><h4 id="子组件传入函数时属性名需要以-on-开头">子组件传入函数时属性名需要以 on 开头</h4><pre><code class="language-javascript">import Taro, { Component } from &#x27;@tarojs/taro&#x27;
import { View, Input } from &#x27;@tarojs/components&#x27;

import Tab from &#x27;../../components/Tab/Tab&#x27;

class MyComponent extends Component {
  state = {
    myTime: 12
  }

  clickHandler (e) {
    console.log(e)
  }
  
  render () {
    const { myTime } = this.state

    return (
      &lt;View className=&#x27;test&#x27;&gt;
        &lt;Tab onChange={this.clickHandler} /&gt;    // ✓ 正确
        &lt;Text className=&#x27;test_text&#x27;&gt;{myTime}&lt;/Text&gt;
      &lt;/View&gt;
    )
  }
}
</code></pre><h3 id="taro-自身限制规范">Taro 自身限制规范</h3><h4 id="不能使用-arraymap-之外的方法操作-jsx-数组">不能使用 Array#map 之外的方法操作 JSX 数组</h4><blockquote><p>Taro 在小程序端实际上把 JSX 转换成了字符串模板，而一个原生 JSX 表达式实际上是一个 React/Nerv 元素(react-element)的构造器，因此在原生 JSX 中你可以随意地对一组 React 元素进行操作。但在 Taro 中你只能使用 <code>map</code> 方法，Taro 转换成小程序中 <code>wx:for</code></p></blockquote><p>以下代码会被 ESLint 提示警告，同时在 Taro（小程序端）也不会有效：</p><pre><code class="language-javascript">test.push(&lt;View /&gt;)

numbers.forEach(number =&gt; {
  if (someCase) {
    a = &lt;View /&gt;
  }
})

test.shift(&lt;View /&gt;)

components.find(component =&gt; {
  return component === &lt;View /&gt;
})

components.some(component =&gt; component.constructor.__proto__ === &lt;View /&gt;.constructor)
</code></pre><p>以下代码不会被警告，也应当在 Taro 任意端中能够运行：</p><pre><code class="language-javascript">numbers.filter(Boolean).map((number) =&gt; {
  const element = &lt;View /&gt;
  return &lt;View /&gt;
})
</code></pre><p><strong>解决方案</strong></p><p>先处理好需要遍历的数组，然后再用处理好的数组调用 <code>map</code> 方法。</p><pre><code class="language-javascript">numbers.filter(isOdd).map((number) =&gt; &lt;View /&gt;)

for (let index = 0; index &lt; array.length; index++) {
  // do you thing with array
}

const element = array.map(item =&gt; {
  return &lt;View /&gt;
})
</code></pre></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/nervjs/taro/edit/docs/versioned_docs/version-2.x/spec-for-taro.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/taro/docs/2.x/specials"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 常见问题</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/taro/docs/2.x/tutorial"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">框架 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#项目组织" class="table-of-contents__link">项目组织</a><ul><li><a href="#文件组织形式" class="table-of-contents__link">文件组织形式</a></li><li><a href="#文件命名" class="table-of-contents__link">文件命名</a></li><li><a href="#文件后缀" class="table-of-contents__link">文件后缀</a></li></ul></li><li><a href="#javascript-书写规范" class="table-of-contents__link">JavaScript 书写规范</a><ul><li><a href="#基本书写" class="table-of-contents__link">基本书写</a></li><li><a href="#变量定义" class="table-of-contents__link">变量定义</a></li><li><a href="#基本类型" class="table-of-contents__link">基本类型</a></li><li><a href="#对象与数组" class="table-of-contents__link">对象与数组</a></li><li><a href="#函数" class="table-of-contents__link">函数</a></li><li><a href="#正则" class="table-of-contents__link">正则</a></li><li><a href="#类定义" class="table-of-contents__link">类定义</a></li><li><a href="#模块" class="table-of-contents__link">模块</a></li><li><a href="#语句" class="table-of-contents__link">语句</a></li><li><a href="#逻辑与循环" class="table-of-contents__link">逻辑与循环</a></li><li><a href="#错误处理" class="table-of-contents__link">错误处理</a></li></ul></li><li><a href="#组件及-jsx-书写规范" class="table-of-contents__link">组件及 JSX 书写规范</a><ul><li><a href="#基本书写-1" class="table-of-contents__link">基本书写</a></li><li><a href="#通用约束与建议" class="table-of-contents__link">通用约束与建议</a></li><li><a href="#taro-自身限制规范" class="table-of-contents__link">Taro 自身限制规范</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer" id="footer"><div class="grid_c1 footer_cont"><div class="footer_logo_container"><div class="footer_logo"></div><span class="footer_designedby"></span></div><div class="footer_link_container"><div class="footer_link"><h3 class="footer_link_tit footer_link_tit1">相关资源</h3><p><a class="link" href="https://taro.jd.com/" target="_blank">Taro</a></p><p><a class="link" href="https://taro-ui.jd.com/" target="_blank">Taro UI</a></p><p><a class="link" href="https://at-ui.github.io/at-ui/#/zh" target="_blank">At-UI</a></p><p><a class="link" href="https://nerv.aotu.io/" target="_blank">Nerv</a></p><p><a class="link" href="https://athena.aotu.io/" target="_blank">Athena</a></p></div><div class="footer_link"><h3 class="footer_link_tit footer_link_tit2">社区</h3><p><a href="https://github.com/NervJS/taro/issues" target="_blank">GitHub</a></p><p><a href="https://taro-club.jd.com" target="_blank">Taro BBS</a></p><p class="footer_link_connect_wrap"><span class="footer_link_connect footer_link_wechat">微信<span class="wechat_qrcode_icon"><svg t="1554966525626" class="icon svgicon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2588" data-spm-anchor-id="a313x.7781069.0.i0"><path d="M240.071 241.095h59.278v59.278h-59.278v-59.278z" fill="" p-id="2589"></path><path d="M405.959 134.485h-272.611v272.611h106.723v47.445h59.278v-47.445h106.723v-59.278h47.445v-47.445h-47.445l-0.114-165.888zM346.795 347.819h-154.169v-154.055h154.055v154.055h0.114zM240.071 727.154h59.278v59.278h-59.278v-59.278zM726.016 241.095h59.278v59.278h-59.278v-59.278zM512.683 509.042v63.943h59.278v-59.165h47.445v-59.278h-47.445v-47.445h-59.278v101.945zM512.683 725.789v60.643h59.278v-106.723h47.445v-59.278h-106.723v105.358zM571.961 786.432h47.445v47.445h-47.445v-47.445zM453.405 833.877v59.165h118.557v-59.165h-118.557z" fill="" p-id="2590"></path><path d="M678.685 679.709h-59.278v106.723h106.61v-59.278h-47.331v-47.445zM726.016 893.042h166.002v-59.165h-106.723v-47.445h-59.278v106.61zM892.018 513.821v-59.278h-106.723v59.278h106.723zM832.739 727.154h59.278v59.278h-59.278v-59.278zM453.405 347.819h59.278v59.278h-59.278v-59.278zM726.016 454.542v-47.445h166.002v-272.611h-272.611v59.278h-106.723v47.445h106.723v59.165h-47.445v47.445h47.445v59.278h59.278v47.445h47.331zM678.685 193.763h154.055v154.055h-154.055v-154.055zM678.685 572.985h47.331v47.445h-47.331v-47.445zM785.294 679.709h-59.278v47.445h106.723v-106.723h59.278v-47.445h-106.723v106.723zM453.405 241.095h59.278v59.278h-59.278v-59.278zM299.349 513.821h47.445v59.165h-47.445v-59.165zM453.405 454.542h-106.61v59.278h59.165v59.165h47.445v-118.443z" fill="" p-id="2591"></path><path d="M405.959 786.432v-106.723h47.445v-59.278h-213.333v-106.61h-106.723v59.278h59.278v47.445h-59.278v272.611h272.611v-59.278h47.445v-47.445h-47.445zM346.795 833.877h-154.169v-154.169h154.055v154.169h0.114zM453.405 572.985h59.278v47.445h-59.278v-47.445zM619.406 513.821h59.278v59.165h-59.278v-59.165zM726.016 513.821h59.278v59.165h-59.278v-59.165z" fill="" p-id="2592"></path></svg></span></span><span class="footer_link_wechat_img"><img src="https://camo.githubusercontent.com/10834a234b99a5880b5dff7c0ca7235e2a0772e7/687474703a2f2f696d6732302e333630627579696d672e636f6d2f7562612f6a66732f7432303139372f3238332f313638373136383837342f3133363034322f32623464383131662f35623330613635634e39643166303366312e706e67"></span></p></div><div class="footer_link"><h3 class="footer_link_tit footer_link_tit3">关于我们</h3><p><a href="https://aotu.io/" target="_blank">凹凸实验室</a></p><p><a href="https://aotu.io/join/" target="_blank">加入我们</a></p><p><a href="mailto:taro@jd.com?subject=【Taro 合作】合作标题">联系我们</a></p></div><div class="footer_link"><h3 class="footer_link_tit footer_link_tit4">感谢</h3><p><a href="http://jdc.jd.com/" target="_blank">用户体验设计部</a></p><p><a href="https://github.com/nervjs/taro#%E8%B4%A1%E7%8C%AE%E8%80%85%E4%BB%AC" target="_blank">Taro 贡献者们</a></p></div></div></div><div class="copyright"><div class="in">Copyright © 2020. All Rights Reserved. 粤ICP备15077732号-2</div></div></footer></div>
<script src="/taro/styles.55db6f27.js"></script>
<script src="/taro/runtime~main.452067a7.js"></script>
<script src="/taro/main.741ca0ab.js"></script>
<script src="/taro/1.8febc1d6.js"></script>
<script src="/taro/2.caae0f6a.js"></script>
<script src="/taro/1be78505.0177abb3.js"></script>
<script src="/taro/45aab7e5.8cbc7b03.js"></script>
<script src="/taro/17896441.09a1fa7a.js"></script>
<script src="/taro/dd1a0879.24ec7453.js"></script>
</body>
</html>